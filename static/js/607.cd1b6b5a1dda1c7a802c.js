"use strict";(self.webpackChunkadmin_fe=self.webpackChunkadmin_fe||[]).push([[607],{74173:(Ne,Q,t)=>{t.d(Q,{Z:()=>H});var h=t(67294),Z=t(85893);const H=w=>{const{render:T,fallback:e,auth:I,...A}=w,D=T&&T();let U=!1;return typeof I=="function"?U=I():typeof I=="boolean"&&(U=I),U?D:(0,Z.jsx)(Z.Fragment,{children:e||null})}},27090:(Ne,Q,t)=>{t.r(Q),t.d(Q,{default:()=>V});var h=t(89250),Z=t(97183),o=t(67294),H=t(68298),w=t(12599),T=t(797),e=t(85893);const A=n=>{const a=(0,h.TH)(),m=(0,w.fp)(T.H,a).filter(d=>d.pathname!=="/"&&d.pathname!=="/home");return(0,e.jsx)("div",{children:(0,e.jsxs)(H.Z,{separator:">",children:[(0,e.jsx)(H.Z.Item,{href:"/",children:(0,e.jsx)("span",{children:"\u9996\u9875"})}),m.map(d=>{var u,c;return(0,e.jsx)(H.Z.Item,{children:(0,e.jsx)("span",{children:d==null||(u=d.route)===null||u===void 0||(c=u.meta)===null||c===void 0?void 0:c.title})},d?.pathname)})]})})};var D=t(66992),U=t(33948),z=t(53807),P=t(71577),q=t(99160),N=t(65460),_=t(24616),je=t(27061),ze=t(63434),Oe=t(88674),W=t(9994);const Re=(n,a)=>(r,m)=>{const{topHeader:d}=m(),{tabList:u}=d;if(u.every(C=>C.key!==a)){var c,y;const C={key:n.pathname,label:n==null||(c=n.route)===null||c===void 0||(y=c.meta)===null||y===void 0?void 0:y.title};r(b([...u,C]))}r(E(a))},Ze=n=>(a,r)=>new Promise((m,d)=>{if(n==="/home")return;const{topHeader:u}=r(),{tabList:c}=u;let y=null;const C=c.filter((le,S)=>{if(le.key!==n)return!0;le.key===n&&(y=S)}),J=c[y-1];a(l(C)),a(E(J?.key)),m(J)}),Le=n=>(a,r)=>{const{topHeader:m}=r(),{tabList:d}=m,u=d.filter(c=>c.key===n||c.key==="/home");a(v(u))},We=n=>(a,r)=>new Promise((m,d)=>{const{topHeader:u}=r(),{tabList:c}=u,y=c.filter(C=>C.key==="/home");a(O(y)),m()}),He=n=>a=>{a(R(n))},l=n=>({type:W.Rr,tabList:n}),v=n=>({type:W.tY,tabList:n}),O=n=>({type:W.L6,tabList:n}),b=n=>({type:W.zJ,tabList:n}),E=n=>({type:W.GK,activeKey:n}),R=n=>({type:W.mf,layoutItems:n});var i=t(86706);const j=n=>{const[a,r]=(0,o.useState)(!1),{changeLayout:m,pageConfig:d={}}=n,{layoutItems:u}=d,c=()=>{r(!1)};function y(){r(!0)}return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(z.Z,{style:{display:"flex",alignItems:"center"},placement:"bottom",title:"\u7CFB\u7EDF\u8BBE\u7F6E",children:(0,e.jsx)(P.ZP,{type:"text",icon:(0,e.jsx)(_.Z,{style:{fontSize:"16px"}}),onClick:y})}),(0,e.jsxs)(q.Z,{title:"\u7CFB\u7EDF\u8BBE\u7F6E",placement:"right",onClose:c,open:a,children:[(0,e.jsx)(N.Z,{children:"\u754C\u9762\u663E\u793A"}),(0,e.jsx)(je.A,{submitter:{render:()=>null},children:(0,e.jsx)(ze.Z.Group,{label:"",name:"layoutItems",initialValue:u,fieldProps:{onChange:C=>m(C)},options:[{value:"tabs",label:"\u6807\u7B7E\u9875"},{value:"breadcrumb",label:"\u9762\u5305\u5C51"},{value:"logo",label:"Logo"},{value:"pageFooter",label:"\u9875\u811A"}]})}),(0,e.jsx)(N.Z,{children:"\u4E3B\u9898\u8BBE\u7F6E"})]})]})},L=(0,i.$j)(n=>n.topHeader,{changeLayout:He})(j);var xe=t(21444),X=t(38296);const ge=()=>{const[n,a]=(0,o.useState)(!1);return n?(0,e.jsx)(z.Z,{title:"\u53D6\u6D88\u5168\u5C4F",children:(0,e.jsx)(xe.Z,{})}):(0,e.jsx)(z.Z,{title:"\u5168\u5C4F",children:(0,e.jsx)(X.Z,{})})},de=o.memo(ge);var pe=t(27032),ee=t(13013),ce=t(47759),te=t(68855),ue=t(18655);const{confirm:ve}=pe.Z,Y=n=>{const{userInfo:a,token:r}=(0,i.v9)(c=>c.global),{logout:m}=n,d=[{label:"\u9000\u51FA\u767B\u5F55",key:"logout"}];function u({key:c}){c==="logout"&&ve({title:"\u6E29\u99A8\u63D0\u793A",icon:(0,e.jsx)(te.Z,{}),content:"\u662F\u5426\u786E\u8BA4\u9000\u51FA",onOk(){m(r)},onCancel(){}})}return(0,e.jsx)(ee.Z,{menu:{items:d,onClick:u},children:(0,e.jsx)(ce.C,{style:{},size:28,src:(0,e.jsx)("img",{src:a?.avatar,alt:"avatar"})})})},ne=(0,i.$j)(null,{logout:ue.kS})(Y),Ce=n=>(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},align:"center",size:"middle",children:[(0,e.jsx)(de,{}),(0,e.jsx)(L,{}),(0,e.jsx)(ne,{})]});var fe=t(72326),ae=t(84595),Se=t(17727),he=t(34804),k=t(19650);const be=[{label:"\u5173\u95ED\u5F53\u524D",key:"current"},{label:"\u5173\u95ED\u5176\u4ED6",key:"other"},{label:"\u5173\u95ED\u6240\u6709",key:"all"}],oe=n=>{const{pathname:a}=(0,h.TH)(),r=(0,h.s0)(),{deleteCurrentTab:m,deleteAllTab:d,deleteOtherTab:u}=n,c=({key:y})=>{if(y==="current")return m(a).then(({key:C})=>r(C));if(y==="other")return u(a);if(y==="all")return d(a).finally(r("/home"))};return(0,e.jsx)(k.Z,{align:"center",children:(0,e.jsx)(ee.Z,{menu:{items:be,onClick:c},children:(0,e.jsx)(P.ZP,{children:(0,e.jsxs)(k.Z,{children:["\u66F4\u591A",(0,e.jsx)(he.Z,{})]})})})})},me=(0,i.$j)(null,{deleteCurrentTab:Ze,deleteAllTab:We,deleteOtherTab:Le})(oe),B=n=>{const{addTabs:a,deleteCurrentTab:r}=n,m=(0,ae.nC)(),d=(0,h.s0)(),u=(0,h.TH)(),c=(0,i.I0)();let{tabList:y,activeKey:C}=(0,i.v9)(S=>S.topHeader,i.wU);(0,o.useEffect)(()=>{const{pathname:S}=u;a(m,S)},[u.pathname]);const J=(S,Ye)=>{r(S).then(({key:p})=>d(p))},le=S=>d(S);return(0,e.jsx)(fe.Z,{type:"editable-card",hideAdd:!0,size:"small",onChange:()=>{},onEdit:J,onTabClick:le,activeKey:C,items:y,tabBarExtraContent:(0,e.jsx)(me,{})})},$=(0,i.$j)(null,{addTabs:Re,deleteCurrentTab:Ze})(B);var F=t(1351),Ae=t(76629);const De=n=>{const{collapsed:a,updateCollapse:r}=n;return(0,e.jsx)("span",{style:{fontSize:"20px",cursor:"pointer",transition:"color 0.3s"},onClick:()=>r(!a),children:a?(0,e.jsx)(F.Z,{}):(0,e.jsx)(Ae.Z,{})})},Te=(0,i.$j)(n=>n.global,{updateCollapse:ue.oR})(De);var ke=t(74173);const Ie=n=>{const{pageConfig:a}=(0,i.v9)(m=>m.topHeader),{layoutItems:r}=a??{};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",height:"38px"},children:[(0,e.jsx)(Te,{}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[(0,e.jsx)(ke.Z,{auth:r?.includes("breadcrumb"),render:()=>(0,e.jsx)(A,{}),fallback:(0,e.jsx)("span",{})}),(0,e.jsx)(Ce,{})]})]}),(0,e.jsx)(N.Z,{style:{margin:"4px 0"}}),r?.includes("tabs")&&(0,e.jsx)($,{})]})};var x=t(15286);const ye=x.ZP.div`
  height: 100%;

  .layout-content {
    margin: 18px 16px;
    height: 100%;
    overflow-Y: auto;
    overflow-X: hidden;
    border-Radius: 4px;
    box-Shadow: 0 2px 6px;
    background: rgb(255, 255, 255);

  }

  .layout-content::-webkit-scrollbar {
    /*滚动条整体样式*/
    width: 3px; /*高宽分别对应横竖滚动条的尺寸*/
    height: 1px;
  }

  .layout-content::-webkit-scrollbar-thumb {
    /*滚动条里面小方块*/
    border-radius: 10px;
    background-color: skyblue;
    background-image: -webkit-linear-gradient(45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent);
  }

  .layout-content::-webkit-scrollbar-track {
    /*滚动条里面轨道*/
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
    background: #ededed;
    border-radius: 10px;
  }
`;var K=t(8505),Be=t(5405),$e=t(16262);const Fe="https://www.logosc.cn/logomrdata/2017/12/13/ff616ad1-0a2e-40a4-8842-9b0b97ea55e4.png",M=x.ZP.div`
  .logo {
    width: 100%;
    display: flex;
    justify-content: space-around;

    img {
      width: auto;
      height: 48px;
    }
  }

  .scrollbar {
    height: calc(100vh - 48px);
    overflow-y: scroll;
  }
`,Pe=()=>{const n=(0,h.s0)(),{userInfo:a,collapsed:r}=(0,i.v9)(p=>p.global,i.wU),{pageConfig:m={}}=(0,i.v9)(p=>p.topHeader),{layoutItems:d}=m,{pathname:u}=(0,h.TH)(),c=p=>p.map(s=>{var se,re,ie;return{...s,label:s==null||(se=s.meta)===null||se===void 0?void 0:se.title,key:s.path,title:s==null||(re=s.meta)===null||re===void 0?void 0:re.title,icon:(0,e.jsx)(Be.Z,{}),children:(s==null||(ie=s.children)===null||ie===void 0?void 0:ie.length)&&c(s?.children)}}).filter(s=>{var se,re,ie,Ke,Me,we,Ue;if((s==null||(se=s.meta)===null||se===void 0?void 0:se.hideInMenu)===!0)return!1;if(a?.role==="admin"||!(s!=null&&(re=s.meta)!==null&&re!==void 0&&(ie=re.auth)!==null&&ie!==void 0&&(Ke=ie.roles)!==null&&Ke!==void 0&&Ke.length)||s!=null&&(Me=s.meta)!==null&&Me!==void 0&&(we=Me.auth)!==null&&we!==void 0&&(Ue=we.roles)!==null&&Ue!==void 0&&Ue.includes(a?.role))return!0}),y=c($e.Z),C=p=>p.filter(s=>u.indexOf(s.path)>-1).map(s=>s.key),[J,le]=(0,o.useState)(()=>C(y)),S=p=>{const s=p[p.length-1];if(s!=null&&s.includes(p[0]))return le(p);le([s])},Ye=({key:p})=>n(p);return(0,e.jsxs)(M,{children:[d?.includes("logo")&&(0,e.jsx)("div",{className:"logo",children:(0,e.jsx)("img",{src:Fe})}),(0,e.jsx)("div",{className:"scrollbar",children:(0,e.jsx)(K.Z,{theme:"dark",mode:"inline",selectedKeys:[u],openKeys:J,items:y,onOpenChange:S,onClick:Ye})})]})},{Header:f,Sider:g,Content:G}=Z.Z,V=()=>{const{userInfo:n,collapsed:a}=(0,i.v9)(r=>r.global,i.wU);return(0,e.jsx)(ye,{children:(0,e.jsxs)(Z.Z,{style:{height:"100%"},children:[(0,e.jsx)(g,{trigger:null,collapsible:!0,collapsed:a,children:(0,e.jsx)(Pe,{})}),(0,e.jsxs)(Z.Z,{className:"site-layout",children:[(0,e.jsx)(f,{style:{padding:"0 20px",background:"#fff",height:"auto"},children:(0,e.jsx)(Ie,{})}),(0,e.jsx)(G,{className:"layout-content",children:(0,e.jsx)("section",{className:"layout-content-section",style:{padding:"6px 6px",height:"100%"},children:(0,e.jsx)(h.j3,{})})})]})]})})}},17727:(Ne,Q,t)=>{var h=t(82109),Z=t(31913),o=t(2492),H=t(47293),w=t(35005),T=t(60614),e=t(36707),I=t(69478),A=t(98052),D=o&&o.prototype,U=!!o&&H(function(){D.finally.call({then:function(){}},function(){})});if(h({target:"Promise",proto:!0,real:!0,forced:U},{finally:function(P){var q=e(this,w("Promise")),N=T(P);return this.then(N?function(_){return I(q,P()).then(function(){return _})}:P,N?function(_){return I(q,P()).then(function(){throw _})}:P)}}),!Z&&T(o)){var z=w("Promise").prototype.finally;D.finally!==z&&A(D,"finally",z,{unsafe:!0})}},33359:(Ne,Q,t)=>{t.d(Q,{Z:()=>He});var h=t(1413),Z=t(29439),o=t(67294),H=t(38475),w=t(8410),T=t(4942),e=t(87462),I=t(94184),A=t.n(I),D=t(63441),U=function(v){var O=v.prefixCls,b=v.className,E=v.style,R=v.children,i=v.containerRef;return o.createElement(o.Fragment,null,o.createElement("div",{className:A()("".concat(O,"-content"),b),style:(0,h.Z)({},E),"aria-modal":"true",role:"dialog",ref:i},R))};const z=U;var P=o.createContext(null);const q=P;var N=t(15105),_=t(80334);function je(l){return typeof l=="string"&&String(Number(l))===l?((0,_.ZP)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(l)):l}function ze(l){warning(!("wrapperClassName"in l),"'wrapperClassName' is removed. Please use 'rootClassName' instead.")}var Oe={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function W(l,v){var O,b,E,R,i=l.prefixCls,j=l.open,L=l.placement,xe=l.inline,X=l.push,ge=l.forceRender,de=l.autoFocus,pe=l.keyboard,ee=l.rootClassName,ce=l.rootStyle,te=l.zIndex,ue=l.className,ve=l.style,Y=l.motion,ne=l.width,Ee=l.height,Ce=l.children,fe=l.contentWrapperStyle,ae=l.mask,Se=l.maskClosable,he=l.maskMotion,k=l.maskClassName,be=l.maskStyle,oe=l.afterOpenChange,me=l.onClose,B=o.useRef(),$=o.useRef(),F=o.useRef();o.useImperativeHandle(v,function(){return B.current});var Ae=function(g){var G=g.keyCode,V=g.shiftKey;switch(G){case N.Z.TAB:{if(G===N.Z.TAB){if(!V&&document.activeElement===F.current){var n;(n=$.current)===null||n===void 0||n.focus({preventScroll:!0})}else if(V&&document.activeElement===$.current){var a;(a=F.current)===null||a===void 0||a.focus({preventScroll:!0})}}break}case N.Z.ESC:{me&&pe&&(g.stopPropagation(),me(g));break}}};o.useEffect(function(){if(j&&de){var f;(f=B.current)===null||f===void 0||f.focus({preventScroll:!0})}},[j]);var De=o.useState(!1),Te=(0,Z.Z)(De,2),ke=Te[0],Ie=Te[1],x=o.useContext(q),ye;X===!1?ye={distance:0}:X===!0?ye={}:ye=X||{};var K=(O=(b=(E=ye)===null||E===void 0?void 0:E.distance)!==null&&b!==void 0?b:x?.pushDistance)!==null&&O!==void 0?O:180,Be=o.useMemo(function(){return{pushDistance:K,push:function(){Ie(!0)},pull:function(){Ie(!1)}}},[K]);o.useEffect(function(){if(j){var f;x==null||(f=x.push)===null||f===void 0||f.call(x)}else{var g;x==null||(g=x.pull)===null||g===void 0||g.call(x)}},[j]),o.useEffect(function(){return function(){var f;x==null||(f=x.pull)===null||f===void 0||f.call(x)}},[]);var $e=ae&&o.createElement(D.Z,(0,e.Z)({key:"mask"},he,{visible:j}),function(f,g){var G=f.className,V=f.style;return o.createElement("div",{className:A()("".concat(i,"-mask"),G,k),style:(0,h.Z)((0,h.Z)({},V),be),onClick:Se&&j?me:void 0,ref:g})}),Fe=typeof Y=="function"?Y(L):Y,M={};if(ke&&K)switch(L){case"top":M.transform="translateY(".concat(K,"px)");break;case"bottom":M.transform="translateY(".concat(-K,"px)");break;case"left":M.transform="translateX(".concat(K,"px)");break;default:M.transform="translateX(".concat(-K,"px)");break}L==="left"||L==="right"?M.width=je(ne):M.height=je(Ee);var Xe=o.createElement(D.Z,(0,e.Z)({key:"panel"},Fe,{visible:j,forceRender:ge,onVisibleChanged:function(g){oe?.(g)},removeOnLeave:!1,leavedClassName:"".concat(i,"-content-wrapper-hidden")}),function(f,g){var G=f.className,V=f.style;return o.createElement("div",{className:A()("".concat(i,"-content-wrapper"),G),style:(0,h.Z)((0,h.Z)((0,h.Z)({},M),V),fe)},o.createElement(z,{containerRef:g,prefixCls:i,className:ue,style:ve},Ce))}),Pe=(0,h.Z)({},ce);return te&&(Pe.zIndex=te),o.createElement(q.Provider,{value:Be},o.createElement("div",{className:A()(i,"".concat(i,"-").concat(L),ee,(R={},(0,T.Z)(R,"".concat(i,"-open"),j),(0,T.Z)(R,"".concat(i,"-inline"),xe),R)),style:Pe,tabIndex:-1,ref:B,onKeyDown:Ae},$e,o.createElement("div",{tabIndex:0,ref:$,style:Oe,"aria-hidden":"true","data-sentinel":"start"}),Xe,o.createElement("div",{tabIndex:0,ref:F,style:Oe,"aria-hidden":"true","data-sentinel":"end"})))}var Re=o.forwardRef(W);const Ze=Re;var Le=function(v){var O=v.open,b=O===void 0?!1:O,E=v.prefixCls,R=E===void 0?"rc-drawer":E,i=v.placement,j=i===void 0?"right":i,L=v.autoFocus,xe=L===void 0?!0:L,X=v.keyboard,ge=X===void 0?!0:X,de=v.width,pe=de===void 0?378:de,ee=v.mask,ce=ee===void 0?!0:ee,te=v.maskClosable,ue=te===void 0?!0:te,ve=v.getContainer,Y=v.forceRender,ne=v.afterOpenChange,Ee=v.destroyOnClose,Ce=o.useState(!1),fe=(0,Z.Z)(Ce,2),ae=fe[0],Se=fe[1],he=o.useRef(),k=o.useRef();(0,w.Z)(function(){b&&(k.current=document.activeElement)},[b]);var be=function(B){var $;if(Se(B),ne?.(B),!B&&k.current&&!(!(($=he.current)===null||$===void 0)&&$.contains(k.current))){var F;(F=k.current)===null||F===void 0||F.focus()}};if(!Y&&!ae&&!b&&Ee)return null;var oe=(0,h.Z)((0,h.Z)({},v),{},{open:b,prefixCls:R,placement:j,autoFocus:xe,keyboard:ge,width:pe,mask:ce,maskClosable:ue,inline:ve===!1,afterOpenChange:be,ref:he});return o.createElement(H.Z,{open:b||Y||ae,autoDestroy:!1,getContainer:ve,autoLock:ce&&(b||ae)},o.createElement(Ze,oe))};const He=Le}}]);
