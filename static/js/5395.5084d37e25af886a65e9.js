"use strict";(self.webpackChunkadmin_fe=self.webpackChunkadmin_fe||[]).push([[5395],{86615:(B,O,t)=>{t.d(O,{Z:()=>a});var P=t(1413),A=t(45987),u=t(22270),i=t(80575),m=t(67294),L=t(64893),l=t(20492),D=t(85893),c=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],f=m.forwardRef(function(e,_){var d=e.fieldProps,n=e.options,E=e.radioType,R=e.layout,T=e.proFieldProps,o=e.valueEnum,s=(0,A.Z)(e,c);return(0,D.jsx)(l.Z,(0,P.Z)((0,P.Z)({valueType:E==="button"?"radioButton":"radio",ref:_,valueEnum:(0,u.h)(o,void 0)},s),{},{fieldProps:(0,P.Z)({options:n,layout:R},d),proFieldProps:T,filedConfig:{customLightMode:!0}}))}),p=m.forwardRef(function(e,_){var d=e.fieldProps,n=e.children;return(0,D.jsx)(i.ZP,(0,P.Z)((0,P.Z)({},d),{},{ref:_,children:n}))}),I=(0,L.G)(p,{valuePropName:"checked",ignoreWidth:!0}),r=I;r.Group=f,r.Button=i.ZP.Button,r.displayName="ProFormComponent";const a=r},35060:(B,O,t)=>{t.d(O,{yq:()=>f,uf:()=>I,dW:()=>p,WY:()=>c});var P=t(88674),A=t(52861);let u=null,i=0;const m=()=>{i++},L=()=>{i--,i===0&&u?.close()},c=(r=>{const a=A.Z.create({baseURL:"/default-api",headers:{"x-access-token":"bqddxxwqmfncffacvbpkuxvwvqrhln"},timeout:3e3,withCredentials:!0,...r});return a.interceptors.request.use(function(e){const{loading:_=!0}=e;return _&&m(),e},function(e){return Promise.reject(e)}),a.interceptors.response.use(function(e){const{loading:_=!0,notify:d=!1}=e.config;_&&L();const{code:n,data:E,message:R,cache:T,timeout:o}=e.data,s={200:()=>e.data,401:()=>{},default:()=>Promise.reject(e.data)};return s[n]?s[n]():s.default()},function(e){const{loading:_=!0}=e.config;return _&&L(),e.response&&e.response.status,Promise.reject(e)}),a})({baseURL:"https://mock.apifox.cn/m1/1225980-0-default"}),f=r=>c.post("/login",{...r}),p=r=>c.post("/userInfo",{token:r}),I=r=>c.post("/logout",{token:r})},25395:(B,O,t)=>{t.r(O),t.d(O,{default:()=>I});var P=t(66992),A=t.n(P),u=t(33948),i=t.n(u),m=t(27061),L=t(86615),l=t(67294),D=t(86706),c=t(18655),f=t(85893);const p=r=>{const{login:a,getUserInfo:e}=r,_=(0,l.useRef)(),{userInfo:d}=(0,D.v9)(o=>o.global),{id:n=""}=d??{},[E,R]=(0,l.useState)(n),T=o=>{const{value:s}=o.target;R(s),a({username:s,password:"123456"}).then(v=>{const{token:y}=v?.data;e(y)})};return(0,f.jsx)(m.A,{style:{background:"#fff",height:"100%"},formRef:_,layout:"horizontal",title:"\u5176\u4ED6\u6743\u9650",submitter:{render:(o,s)=>null},children:(0,f.jsx)(m.A.Group,{title:"\u9875\u9762\u6743\u9650\u793A\u4F8B",children:(0,f.jsx)(L.Z.Group,{name:"authPage",label:`\u5207\u6362\u9875\u9762\u6743\u9650 --> \u5F53\u524DRole:[${E}]`,radioType:"button",initialValue:E,fieldProps:{onChange:o=>T(o)},options:[{value:"admin",label:"admin"},{value:"editor",label:"editor"},{value:"guest",label:"guest"}]})})})},I=(0,D.$j)(null,{login:c.x4,getUserInfo:c.bG})(p)},18655:(B,O,t)=>{t.d(O,{bG:()=>D,kS:()=>c,oR:()=>f,x4:()=>l});var P=t(88674),A=t.n(P),u=t(35060),i=t(75544),m=t(84595),L=t(48754);const l=({username:a,password:e})=>_=>new Promise((d,n)=>{(0,u.yq)({username:a,password:e}).then(E=>{const{status:R,token:T}=E.data;R===0?(_(p(T)),(0,m.o4)(T),d(E)):n()})}),D=a=>e=>new Promise((_,d)=>{(0,u.dW)(a).then(n=>{const{userInfo:E}=n;e(I(E)),(0,m.ps)(E),_(n)})}),c=a=>e=>new Promise((_,d)=>{(0,u.uf)(a).then(n=>{n?.data.status===0&&(e(p(void 0)),e(r()),e((0,L.Yc)()),window.localStorage.clear(),_())}).catch(n=>d(n))}),f=a=>({type:i._U,collapsed:a}),p=a=>({type:i.rw,token:a}),I=a=>({type:i.rG,userInfo:a}),r=()=>({type:i.IR})},48754:(B,O,t)=>{t.d(O,{BH:()=>D,ND:()=>f,Ud:()=>p,Yc:()=>T,_I:()=>c,c_:()=>I,fu:()=>r});var P=t(66992),A=t.n(P),u=t(33948),i=t.n(u),m=t(88674),L=t.n(m),l=t(9994);const D=(o,s)=>(v,y)=>{const{topHeader:g}=y(),{tabList:j}=g;if(j.every(U=>U.key!==s)){var M,C;const U={key:o.pathname,label:o==null||(M=o.route)===null||M===void 0||(C=M.meta)===null||C===void 0?void 0:C.title};v(d([...j,U]))}v(n(s))},c=o=>(s,v)=>new Promise((y,g)=>{if(o==="/home")return;const{topHeader:j}=v(),{tabList:M}=j;let C=null;const U=M.filter((h,K)=>{if(h.key!==o)return!0;h.key===o&&(C=K)}),W=M[C-1];s(a(U)),s(n(W?.key)),y(W)}),f=o=>(s,v)=>{const{topHeader:y}=v(),{tabList:g}=y,j=g.filter(M=>M.key===o||M.key==="/home");s(e(j))},p=o=>(s,v)=>new Promise((y,g)=>{const{topHeader:j}=v(),{tabList:M}=j,C=M.filter(U=>U.key==="/home");s(_(C)),y()}),I=o=>s=>{s(E(o))},r=o=>s=>{s(R(o))},a=o=>({type:l.Rr,tabList:o}),e=o=>({type:l.tY,tabList:o}),_=o=>({type:l.L6,tabList:o}),d=o=>({type:l.zJ,tabList:o}),n=o=>({type:l.GK,activeKey:o}),E=o=>({type:l.mf,layoutItems:o}),R=o=>({type:l.rW,layoutMode:o}),T=()=>({type:l.cy})}}]);
