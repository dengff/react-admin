"use strict";(self.webpackChunkadmin_fe=self.webpackChunkadmin_fe||[]).push([[395],{35060:(h,y,e)=>{e.d(y,{yq:()=>l,uf:()=>u,dW:()=>j,WY:()=>s});var f=e(88674),p=e(52861);let c=null,d=0;const v=()=>{d++},D=()=>{d--,d===0&&c?.close()},s=(i=>{const I=p.Z.create({baseURL:"/default-api",headers:{"x-access-token":"bqddxxwqmfncffacvbpkuxvwvqrhln"},timeout:3e3,withCredentials:!0,...i});return I.interceptors.request.use(function(o){const{loading:a=!0}=o;return a&&v(),o},function(o){return Promise.reject(o)}),I.interceptors.response.use(function(o){const{loading:a=!0,notify:E=!1}=o.config;a&&D();const{code:m,data:r,message:O,cache:U,timeout:t}=o.data,n={200:()=>o.data,401:()=>{},default:()=>Promise.reject(o.data)};return n[m]?n[m]():n.default()},function(o){const{loading:a=!0}=o.config;return a&&D(),o.response&&o.response.status,Promise.reject(o)}),I})({baseURL:"https://mock.apifox.cn/m1/1225980-0-default"}),l=i=>s.post("/login",{...i}),j=i=>s.post("/userInfo",{token:i}),u=i=>s.post("/logout",{token:i})},25395:(h,y,e)=>{e.r(y),e.d(y,{default:()=>u});var f=e(66992),p=e.n(f),c=e(33948),d=e.n(c),v=e(27061),D=e(86615),_=e(67294),L=e(86706),s=e(18655),l=e(85893);const j=i=>{const{login:I,getUserInfo:o}=i,a=(0,_.useRef)(),{userInfo:E}=(0,L.v9)(t=>t.global),{id:m=""}=E??{},[r,O]=(0,_.useState)(m),U=t=>{const{value:n}=t.target;O(n),I({username:n,password:"123456"}).then(P=>{const{token:T}=P?.data;o(T)})};return(0,l.jsx)(v.A,{formRef:a,layout:"horizontal",title:"\u5176\u4ED6\u6743\u9650",submitter:{render:(t,n)=>null},children:(0,l.jsx)(v.A.Group,{title:"\u9875\u9762\u6743\u9650\u793A\u4F8B",children:(0,l.jsx)(D.Z.Group,{name:"authPage",label:`\u5207\u6362\u9875\u9762\u6743\u9650 --> \u5F53\u524DRole:[${r}]`,radioType:"button",initialValue:r,fieldProps:{onChange:t=>U(t)},options:[{value:"admin",label:"admin"},{value:"editor",label:"editor"},{value:"guest",label:"guest"}]})})})},u=(0,L.$j)(null,{login:s.x4,getUserInfo:s.bG})(j)},18655:(h,y,e)=>{e.d(y,{bG:()=>s,kS:()=>l,oR:()=>j,x4:()=>L});var f=e(88674),p=e.n(f),c=e(35060),d=e(75544),v=e(84595),D=e(48754),_=e(71473);const L=({username:o,password:a})=>E=>new Promise((m,r)=>{(0,c.yq)({username:o,password:a}).then(O=>{const{status:U,token:t}=O.data;U===0?(E(u(t)),(0,v.o4)(t),m(O)):r()})}),s=o=>a=>new Promise((E,m)=>{(0,c.dW)(o).then(r=>{const{userInfo:O}=r;a(i(O)),(0,v.ps)(O),E(r)})}),l=o=>a=>new Promise((E,m)=>{(0,c.uf)(o).then(r=>{r?.data.status===0&&(a(u(void 0)),a(I()),a((0,D.Yc)()),a((0,_.Tx)()),window.localStorage.clear(),E())}).catch(r=>m(r))}),j=o=>({type:d._U,collapsed:o}),u=o=>({type:d.rw,token:o}),i=o=>({type:d.rG,userInfo:o}),I=()=>({type:d.IR})},71473:(h,y,e)=>{e.d(y,{It:()=>d,Lr:()=>p,Tx:()=>L,gp:()=>c});var f=e(14269);const p=s=>(l,j)=>{const u=document.body;return l(v(s)),s.isGrey?u.setAttribute("style","filter: grayscale(1)"):s.isColorWeakness?u.setAttribute("style","filter: invert(80%)"):u.setAttribute("style","")},c=s=>l=>{l(D(s))},d=s=>l=>{l(_(s))},v=s=>({type:f.M$,themeMode:s}),D=s=>({type:f.K9,colorPrimary:s}),_=s=>({type:f.Hj,componentSize:s}),L=()=>({type:f.Fy})},48754:(h,y,e)=>{e.d(y,{BH:()=>L,ND:()=>l,Ud:()=>j,Yc:()=>U,_I:()=>s,c_:()=>u,fu:()=>i});var f=e(66992),p=e.n(f),c=e(33948),d=e.n(c),v=e(88674),D=e.n(v),_=e(9994);const L=(t,n)=>(P,T)=>{const{topHeader:R}=T(),{tabList:g}=R;if(g.every(A=>A.key!==n)){var M,C;const A={key:t.pathname,label:t==null||(M=t.route)===null||M===void 0||(C=M.meta)===null||C===void 0?void 0:C.title};P(E([...g,A]))}P(m(n))},s=t=>(n,P)=>new Promise((T,R)=>{if(t==="/home")return;const{topHeader:g}=P(),{tabList:M}=g;let C=null;const A=M.filter((K,B)=>{if(K.key!==t)return!0;K.key===t&&(C=B)}),W=M[C-1];n(I(A)),n(m(W?.key)),T(W)}),l=t=>(n,P)=>{const{topHeader:T}=P(),{tabList:R}=T,g=R.filter(M=>M.key===t||M.key==="/home");n(o(g))},j=t=>(n,P)=>new Promise((T,R)=>{const{topHeader:g}=P(),{tabList:M}=g,C=M.filter(A=>A.key==="/home");n(a(C)),T()}),u=t=>n=>{n(r(t))},i=t=>n=>{n(O(t))},I=t=>({type:_.Rr,tabList:t}),o=t=>({type:_.tY,tabList:t}),a=t=>({type:_.L6,tabList:t}),E=t=>({type:_.zJ,tabList:t}),m=t=>({type:_.GK,activeKey:t}),r=t=>({type:_.mf,layoutItems:t}),O=t=>({type:_.rW,layoutMode:t}),U=()=>({type:_.cy})}}]);
