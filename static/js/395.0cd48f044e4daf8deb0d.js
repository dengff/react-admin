"use strict";(self.webpackChunkadmin_fe=self.webpackChunkadmin_fe||[]).push([[395],{35060:(B,O,e)=>{e.d(O,{yq:()=>v,uf:()=>T,dW:()=>D,WY:()=>u});var A=e(88674),p=e(52861);let d=null,i=0;const P=()=>{i++},j=()=>{i--,i===0&&d?.close()},u=(l=>{const n=p.Z.create({baseURL:"/default-api",headers:{"x-access-token":"bqddxxwqmfncffacvbpkuxvwvqrhln"},timeout:3e3,withCredentials:!0,...l});return n.interceptors.request.use(function(o){const{loading:_=!0}=o;return _&&P(),o},function(o){return Promise.reject(o)}),n.interceptors.response.use(function(o){const{loading:_=!0,notify:E=!1}=o.config;_&&j();const{code:a,data:f,message:C,cache:g,timeout:t}=o.data,s={200:()=>o.data,401:()=>{},default:()=>Promise.reject(o.data)};return s[a]?s[a]():s.default()},function(o){const{loading:_=!0}=o.config;return _&&j(),o.response&&o.response.status,Promise.reject(o)}),n})({baseURL:"https://mock.apifox.cn/m1/1225980-0-default"}),v=l=>u.post("/login",{...l}),D=l=>u.post("/userInfo",{token:l}),T=l=>u.post("/logout",{token:l})},25395:(B,O,e)=>{e.r(O),e.d(O,{default:()=>T});var A=e(66992),p=e.n(A),d=e(33948),i=e.n(d),P=e(27061),j=e(86615),r=e(67294),y=e(86706),u=e(18655),v=e(85893);const D=l=>{const{login:n,getUserInfo:o}=l,_=(0,r.useRef)(),{userInfo:E}=(0,y.v9)(t=>t.global),{id:a=""}=E??{},[f,C]=(0,r.useState)(a),g=t=>{const{value:s}=t.target;C(s),n({username:s,password:"123456"}).then(c=>{const{token:M}=c?.data;o(M)})};return(0,v.jsx)(P.A,{style:{background:"#fff"},formRef:_,layout:"horizontal",title:"\u5176\u4ED6\u6743\u9650",submitter:{render:(t,s)=>null},children:(0,v.jsx)(P.A.Group,{title:"\u9875\u9762\u6743\u9650\u793A\u4F8B",children:(0,v.jsx)(j.Z.Group,{name:"authPage",label:`\u5207\u6362\u9875\u9762\u6743\u9650 --> \u5F53\u524DRole:[${f}]`,radioType:"button",initialValue:f,fieldProps:{onChange:t=>g(t)},options:[{value:"admin",label:"admin"},{value:"editor",label:"editor"},{value:"guest",label:"guest"}]})})})},T=(0,y.$j)(null,{login:u.x4,getUserInfo:u.bG})(D)},18655:(B,O,e)=>{e.d(O,{bG:()=>y,kS:()=>u,oR:()=>v,x4:()=>r});var A=e(88674),p=e.n(A),d=e(35060),i=e(75544),P=e(84595),j=e(48754);const r=({username:n,password:o})=>_=>new Promise((E,a)=>{(0,d.yq)({username:n,password:o}).then(f=>{const{status:C,token:g}=f.data;C===0?(_(D(g)),(0,P.o4)(g),E(f)):a()})}),y=n=>o=>new Promise((_,E)=>{(0,d.dW)(n).then(a=>{const{userInfo:f}=a;o(T(f)),(0,P.ps)(f),_(a)})}),u=n=>o=>new Promise((_,E)=>{(0,d.uf)(n).then(a=>{a?.data.status===0&&(o(D(void 0)),o(l()),o((0,j.Yc)()),window.localStorage.clear(),_())}).catch(a=>E(a))}),v=n=>({type:i._U,collapsed:n}),D=n=>({type:i.rw,token:n}),T=n=>({type:i.rG,userInfo:n}),l=()=>({type:i.IR})},48754:(B,O,e)=>{e.d(O,{BH:()=>y,ND:()=>v,Ud:()=>D,Yc:()=>g,_I:()=>u,c_:()=>T,fu:()=>l});var A=e(66992),p=e.n(A),d=e(33948),i=e.n(d),P=e(88674),j=e.n(P),r=e(9994);const y=(t,s)=>(c,M)=>{const{topHeader:R}=M(),{tabList:L}=R;if(L.every(U=>U.key!==s)){var m,I;const U={key:t.pathname,label:t==null||(m=t.route)===null||m===void 0||(I=m.meta)===null||I===void 0?void 0:I.title};c(E([...L,U]))}c(a(s))},u=t=>(s,c)=>new Promise((M,R)=>{if(t==="/home")return;const{topHeader:L}=c(),{tabList:m}=L;let I=null;const U=m.filter((K,h)=>{if(K.key!==t)return!0;K.key===t&&(I=h)}),W=m[I-1];s(n(U)),s(a(W?.key)),M(W)}),v=t=>(s,c)=>{const{topHeader:M}=c(),{tabList:R}=M,L=R.filter(m=>m.key===t||m.key==="/home");s(o(L))},D=t=>(s,c)=>new Promise((M,R)=>{const{topHeader:L}=c(),{tabList:m}=L,I=m.filter(U=>U.key==="/home");s(_(I)),M()}),T=t=>s=>{s(f(t))},l=t=>s=>{s(C(t))},n=t=>({type:r.Rr,tabList:t}),o=t=>({type:r.tY,tabList:t}),_=t=>({type:r.L6,tabList:t}),E=t=>({type:r.zJ,tabList:t}),a=t=>({type:r.GK,activeKey:t}),f=t=>({type:r.mf,layoutItems:t}),C=t=>({type:r.rW,layoutMode:t}),g=()=>({type:r.cy})}}]);
