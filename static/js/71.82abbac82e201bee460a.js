"use strict";(self.webpackChunkantd_admin=self.webpackChunkantd_admin||[]).push([[71],{80071:(Ne,Y,K)=>{K.d(Y,{Z:()=>le});var J=K(87462),R=K(4942),Q=K(71002),k=K(1413),j=K(93433),V=K(15671),q=K(43144),z=K(97326),ee=K(79340),te=K(98557),b=K(67294),S=K(15105),U=K(80334),ne=K(64217),ae=K(94184),oe=K.n(ae),re=K(27822),h=K(10225),_=K(1089),w=K(63084),de=K(52431),F=K(17341),se=K(56678),ie=10,H=function(X){(0,ee.Z)(I,X);var G=(0,te.Z)(I);function I(){var e;(0,V.Z)(this,I);for(var s=arguments.length,D=new Array(s),C=0;C<s;C++)D[C]=arguments[C];return e=G.call.apply(G,[this].concat(D)),e.destroyed=!1,e.delayedDragEnterLogic=void 0,e.loadingRetryTimes={},e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,_.w$)()},e.dragStartMousePosition=null,e.dragNode=void 0,e.currentMouseOverDroppableNodeKey=null,e.listRef=b.createRef(),e.onNodeDragStart=function(t,a){var n=e.state,r=n.expandedKeys,d=n.keyEntities,l=e.props.onDragStart,i=a.props.eventKey;e.dragNode=a,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var c=(0,h._5)(r,i);e.setState({draggingNodeKey:i,dragChildrenKeys:(0,h.wA)(i,d),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(c),window.addEventListener("dragend",e.onWindowDragEnd),l?.({event:t,node:(0,_.F)(a.props)})},e.onNodeDragEnter=function(t,a){var n=e.state,r=n.expandedKeys,d=n.keyEntities,l=n.dragChildrenKeys,i=n.flattenNodes,c=n.indent,f=e.props,v=f.onDragEnter,o=f.onExpand,p=f.allowDrop,y=f.direction,u=a.props,g=u.pos,E=u.eventKey,N=(0,z.Z)(e),P=N.dragNode;if(e.currentMouseOverDroppableNodeKey!==E&&(e.currentMouseOverDroppableNodeKey=E),!P){e.resetDragState();return}var m=(0,h.OM)(t,P,a,c,e.dragStartMousePosition,p,i,d,r,y),T=m.dropPosition,x=m.dropLevelOffset,O=m.dropTargetKey,L=m.dropContainerKey,A=m.dropTargetPos,Z=m.dropAllowed,W=m.dragOverNodeKey;if(l.indexOf(O)!==-1||!Z){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(M){clearTimeout(e.delayedDragEnterLogic[M])}),P.props.eventKey!==a.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[g]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var M=(0,j.Z)(r),B=d[a.props.eventKey];B&&(B.children||[]).length&&(M=(0,h.L0)(r,a.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(M),o?.(M,{node:(0,_.F)(a.props),expanded:!0,nativeEvent:t.nativeEvent})}},800)),P.props.eventKey===O&&x===0){e.resetDragState();return}e.setState({dragOverNodeKey:W,dropPosition:T,dropLevelOffset:x,dropTargetKey:O,dropContainerKey:L,dropTargetPos:A,dropAllowed:Z}),v?.({event:t,node:(0,_.F)(a.props),expandedKeys:r})},e.onNodeDragOver=function(t,a){var n=e.state,r=n.dragChildrenKeys,d=n.flattenNodes,l=n.keyEntities,i=n.expandedKeys,c=n.indent,f=e.props,v=f.onDragOver,o=f.allowDrop,p=f.direction,y=(0,z.Z)(e),u=y.dragNode;if(u){var g=(0,h.OM)(t,u,a,c,e.dragStartMousePosition,o,d,l,i,p),E=g.dropPosition,N=g.dropLevelOffset,P=g.dropTargetKey,m=g.dropContainerKey,T=g.dropAllowed,x=g.dropTargetPos,O=g.dragOverNodeKey;r.indexOf(P)!==-1||!T||(u.props.eventKey===P&&N===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():E===e.state.dropPosition&&N===e.state.dropLevelOffset&&P===e.state.dropTargetKey&&m===e.state.dropContainerKey&&x===e.state.dropTargetPos&&T===e.state.dropAllowed&&O===e.state.dragOverNodeKey||e.setState({dropPosition:E,dropLevelOffset:N,dropTargetKey:P,dropContainerKey:m,dropTargetPos:x,dropAllowed:T,dragOverNodeKey:O}),v?.({event:t,node:(0,_.F)(a.props)}))}},e.onNodeDragLeave=function(t,a){e.currentMouseOverDroppableNodeKey===a.props.eventKey&&!t.currentTarget.contains(t.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var n=e.props.onDragLeave;n?.({event:t,node:(0,_.F)(a.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,a){var n=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),n?.({event:t,node:(0,_.F)(a.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDrop=function(t,a){var n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=e.state,l=d.dragChildrenKeys,i=d.dropPosition,c=d.dropTargetKey,f=d.dropTargetPos,v=d.dropAllowed;if(v){var o=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),c!==null){var p=(0,k.Z)((0,k.Z)({},(0,_.H8)(c,e.getTreeNodeRequiredProps())),{},{active:((n=e.getActiveItem())===null||n===void 0?void 0:n.key)===c,data:e.state.keyEntities[c].node}),y=l.indexOf(c)!==-1;(0,U.ZP)(!y,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var u=(0,h.yx)(f),g={event:t,node:(0,_.F)(p),dragNode:e.dragNode?(0,_.F)(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(l),dropToGap:i!==0,dropPosition:i+Number(u[u.length-1])};r||o?.(g),e.dragNode=null}}},e.cleanDragState=function(){var t=e.state.draggingNodeKey;t!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null},e.triggerExpandActionExpand=function(t,a){var n=e.state,r=n.expandedKeys,d=n.flattenNodes,l=a.expanded,i=a.key,c=a.isLeaf;if(!(c||t.shiftKey||t.metaKey||t.ctrlKey)){var f=d.filter(function(o){return o.key===i})[0],v=(0,_.F)((0,k.Z)((0,k.Z)({},(0,_.H8)(i,e.getTreeNodeRequiredProps())),{},{data:f.data}));e.setExpandedKeys(l?(0,h._5)(r,i):(0,h.L0)(r,i)),e.onNodeExpand(t,v)}},e.onNodeClick=function(t,a){var n=e.props,r=n.onClick,d=n.expandAction;d==="click"&&e.triggerExpandActionExpand(t,a),r?.(t,a)},e.onNodeDoubleClick=function(t,a){var n=e.props,r=n.onDoubleClick,d=n.expandAction;d==="doubleClick"&&e.triggerExpandActionExpand(t,a),r?.(t,a)},e.onNodeSelect=function(t,a){var n=e.state.selectedKeys,r=e.state,d=r.keyEntities,l=r.fieldNames,i=e.props,c=i.onSelect,f=i.multiple,v=a.selected,o=a[l.key],p=!v;p?f?n=(0,h.L0)(n,o):n=[o]:n=(0,h._5)(n,o);var y=n.map(function(u){var g=d[u];return g?g.node:null}).filter(function(u){return u});e.setUncontrolledState({selectedKeys:n}),c?.(n,{event:"select",selected:p,node:a,selectedNodes:y,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,a,n){var r=e.state,d=r.keyEntities,l=r.checkedKeys,i=r.halfCheckedKeys,c=e.props,f=c.checkStrictly,v=c.onCheck,o=a.key,p,y={event:"check",node:a,checked:n,nativeEvent:t.nativeEvent};if(f){var u=n?(0,h.L0)(l,o):(0,h._5)(l,o),g=(0,h._5)(i,o);p={checked:u,halfChecked:g},y.checkedNodes=u.map(function(x){return d[x]}).filter(function(x){return x}).map(function(x){return x.node}),e.setUncontrolledState({checkedKeys:u})}else{var E=(0,F.S)([].concat((0,j.Z)(l),[o]),!0,d),N=E.checkedKeys,P=E.halfCheckedKeys;if(!n){var m=new Set(N);m.delete(o);var T=(0,F.S)(Array.from(m),{checked:!1,halfCheckedKeys:P},d);N=T.checkedKeys,P=T.halfCheckedKeys}p=N,y.checkedNodes=[],y.checkedNodesPositions=[],y.halfCheckedKeys=P,N.forEach(function(x){var O=d[x];if(O){var L=O.node,A=O.pos;y.checkedNodes.push(L),y.checkedNodesPositions.push({node:L,pos:A})}}),e.setUncontrolledState({checkedKeys:N},!1,{halfCheckedKeys:P})}v?.(p,y)},e.onNodeLoad=function(t){var a=t.key,n=new Promise(function(r,d){e.setState(function(l){var i=l.loadedKeys,c=i===void 0?[]:i,f=l.loadingKeys,v=f===void 0?[]:f,o=e.props,p=o.loadData,y=o.onLoad;if(!p||c.indexOf(a)!==-1||v.indexOf(a)!==-1)return null;var u=p(t);return u.then(function(){var g=e.state.loadedKeys,E=(0,h.L0)(g,a);y?.(E,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:E}),e.setState(function(N){return{loadingKeys:(0,h._5)(N.loadingKeys,a)}}),r()}).catch(function(g){if(e.setState(function(N){return{loadingKeys:(0,h._5)(N.loadingKeys,a)}}),e.loadingRetryTimes[a]=(e.loadingRetryTimes[a]||0)+1,e.loadingRetryTimes[a]>=ie){var E=e.state.loadedKeys;(0,U.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:(0,h.L0)(E,a)}),r()}d(g)}),{loadingKeys:(0,h.L0)(v,a)}})});return n.catch(function(){}),n},e.onNodeMouseEnter=function(t,a){var n=e.props.onMouseEnter;n?.({event:t,node:a})},e.onNodeMouseLeave=function(t,a){var n=e.props.onMouseLeave;n?.({event:t,node:a})},e.onNodeContextMenu=function(t,a){var n=e.props.onRightClick;n&&(t.preventDefault(),n({event:t,node:a}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0});for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];t?.apply(void 0,n)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];t?.apply(void 0,n)},e.getTreeNodeRequiredProps=function(){var t=e.state,a=t.expandedKeys,n=t.selectedKeys,r=t.loadedKeys,d=t.loadingKeys,l=t.checkedKeys,i=t.halfCheckedKeys,c=t.dragOverNodeKey,f=t.dropPosition,v=t.keyEntities;return{expandedKeys:a||[],selectedKeys:n||[],loadedKeys:r||[],loadingKeys:d||[],checkedKeys:l||[],halfCheckedKeys:i||[],dragOverNodeKey:c,dropPosition:f,keyEntities:v}},e.setExpandedKeys=function(t){var a=e.state,n=a.treeData,r=a.fieldNames,d=(0,_.oH)(n,t,r);e.setUncontrolledState({expandedKeys:t,flattenNodes:d},!0)},e.onNodeExpand=function(t,a){var n=e.state.expandedKeys,r=e.state,d=r.listChanging,l=r.fieldNames,i=e.props,c=i.onExpand,f=i.loadData,v=a.expanded,o=a[l.key];if(!d){var p=n.indexOf(o),y=!v;if((0,U.ZP)(v&&p!==-1||!v&&p===-1,"Expand state not sync with index check"),y?n=(0,h.L0)(n,o):n=(0,h._5)(n,o),e.setExpandedKeys(n),c?.(n,{node:a,expanded:y,nativeEvent:t.nativeEvent}),y&&f){var u=e.onNodeLoad(a);u&&u.then(function(){var g=(0,_.oH)(e.state.treeData,n,l);e.setUncontrolledState({flattenNodes:g})}).catch(function(){var g=e.state.expandedKeys,E=(0,h._5)(g,o);e.setExpandedKeys(E)})}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})},e.onActiveChange=function(t){var a=e.state.activeKey,n=e.props.onActiveChange;a!==t&&(e.setState({activeKey:t}),t!==null&&e.scrollTo({key:t}),n?.(t))},e.getActiveItem=function(){var t=e.state,a=t.activeKey,n=t.flattenNodes;return a===null?null:n.find(function(r){var d=r.key;return d===a})||null},e.offsetActiveKey=function(t){var a=e.state,n=a.flattenNodes,r=a.activeKey,d=n.findIndex(function(c){var f=c.key;return f===r});d===-1&&t<0&&(d=n.length),d=(d+t+n.length)%n.length;var l=n[d];if(l){var i=l.key;e.onActiveChange(i)}else e.onActiveChange(null)},e.onKeyDown=function(t){var a=e.state,n=a.activeKey,r=a.expandedKeys,d=a.checkedKeys,l=a.fieldNames,i=e.props,c=i.onKeyDown,f=i.checkable,v=i.selectable;switch(t.which){case S.Z.UP:{e.offsetActiveKey(-1),t.preventDefault();break}case S.Z.DOWN:{e.offsetActiveKey(1),t.preventDefault();break}}var o=e.getActiveItem();if(o&&o.data){var p=e.getTreeNodeRequiredProps(),y=o.data.isLeaf===!1||!!(o.data[l.children]||[]).length,u=(0,_.F)((0,k.Z)((0,k.Z)({},(0,_.H8)(n,p)),{},{data:o.data,active:!0}));switch(t.which){case S.Z.LEFT:{y&&r.includes(n)?e.onNodeExpand({},u):o.parent&&e.onActiveChange(o.parent.key),t.preventDefault();break}case S.Z.RIGHT:{y&&!r.includes(n)?e.onNodeExpand({},u):o.children&&o.children.length&&e.onActiveChange(o.children[0].key),t.preventDefault();break}case S.Z.ENTER:case S.Z.SPACE:{f&&!u.disabled&&u.checkable!==!1&&!u.disableCheckbox?e.onNodeCheck({},u,!d.includes(n)):!f&&v&&!u.disabled&&u.selectable!==!1&&e.onNodeSelect({},u);break}}}c?.(t)},e.setUncontrolledState=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var r=!1,d=!0,l={};Object.keys(t).forEach(function(i){if(i in e.props){d=!1;return}r=!0,l[i]=t[i]}),r&&(!a||d)&&e.setState((0,k.Z)((0,k.Z)({},l),n))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return(0,q.Z)(I,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var s=this.props.activeKey;s!==void 0&&s!==this.state.activeKey&&(this.setState({activeKey:s}),s!==null&&this.scrollTo({key:s}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var s,D=this.state,C=D.focused,t=D.flattenNodes,a=D.keyEntities,n=D.draggingNodeKey,r=D.activeKey,d=D.dropLevelOffset,l=D.dropContainerKey,i=D.dropTargetKey,c=D.dropPosition,f=D.dragOverNodeKey,v=D.indent,o=this.props,p=o.prefixCls,y=o.className,u=o.style,g=o.showLine,E=o.focusable,N=o.tabIndex,P=N===void 0?0:N,m=o.selectable,T=o.showIcon,x=o.icon,O=o.switcherIcon,L=o.draggable,A=o.checkable,Z=o.checkStrictly,W=o.disabled,M=o.motion,B=o.loadData,ce=o.filterTreeNode,ue=o.height,fe=o.itemHeight,ve=o.virtual,pe=o.titleRender,ye=o.dropIndicatorRender,ge=o.onContextMenu,he=o.onScroll,Ke=o.direction,Ee=o.rootClassName,De=o.rootStyle,_e=(0,ne.Z)(this.props,{aria:!0,data:!0}),$;return L&&((0,Q.Z)(L)==="object"?$=L:typeof L=="function"?$={nodeDraggable:L}:$={}),b.createElement(re.k.Provider,{value:{prefixCls:p,selectable:m,showIcon:T,icon:x,switcherIcon:O,draggable:$,draggingNodeKey:n,checkable:A,checkStrictly:Z,disabled:W,keyEntities:a,dropLevelOffset:d,dropContainerKey:l,dropTargetKey:i,dropPosition:c,dragOverNodeKey:f,indent:v,direction:Ke,dropIndicatorRender:ye,loadData:B,filterTreeNode:ce,titleRender:pe,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},b.createElement("div",{role:"tree",className:oe()(p,y,Ee,(s={},(0,R.Z)(s,"".concat(p,"-show-line"),g),(0,R.Z)(s,"".concat(p,"-focused"),C),(0,R.Z)(s,"".concat(p,"-active-focused"),r!==null),s)),style:De},b.createElement(w.ZP,(0,J.Z)({ref:this.listRef,prefixCls:p,style:u,data:t,disabled:W,selectable:m,checkable:!!A,motion:M,dragging:n!==null,height:ue,itemHeight:fe,virtual:ve,focusable:E,focused:C,tabIndex:P,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:ge,onScroll:he},this.getTreeNodeRequiredProps(),_e))))}}],[{key:"getDerivedStateFromProps",value:function(s,D){var C=D.prevProps,t={prevProps:s};function a(E){return!C&&E in s||C&&C[E]!==s[E]}var n,r=D.fieldNames;if(a("fieldNames")&&(r=(0,_.w$)(s.fieldNames),t.fieldNames=r),a("treeData")?n=s.treeData:a("children")&&((0,U.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=(0,_.zn)(s.children)),n){t.treeData=n;var d=(0,_.I8)(n,{fieldNames:r});t.keyEntities=(0,k.Z)((0,R.Z)({},w.eo,w._1),d.keyEntities)}var l=t.keyEntities||D.keyEntities;if(a("expandedKeys")||C&&a("autoExpandParent"))t.expandedKeys=s.autoExpandParent||!C&&s.defaultExpandParent?(0,h.r7)(s.expandedKeys,l):s.expandedKeys;else if(!C&&s.defaultExpandAll){var i=(0,k.Z)({},l);delete i[w.eo],t.expandedKeys=Object.keys(i).map(function(E){return i[E].key})}else!C&&s.defaultExpandedKeys&&(t.expandedKeys=s.autoExpandParent||s.defaultExpandParent?(0,h.r7)(s.defaultExpandedKeys,l):s.defaultExpandedKeys);if(t.expandedKeys||delete t.expandedKeys,n||t.expandedKeys){var c=(0,_.oH)(n||D.treeData,t.expandedKeys||D.expandedKeys,r);t.flattenNodes=c}if(s.selectable&&(a("selectedKeys")?t.selectedKeys=(0,h.BT)(s.selectedKeys,s):!C&&s.defaultSelectedKeys&&(t.selectedKeys=(0,h.BT)(s.defaultSelectedKeys,s))),s.checkable){var f;if(a("checkedKeys")?f=(0,h.E6)(s.checkedKeys)||{}:!C&&s.defaultCheckedKeys?f=(0,h.E6)(s.defaultCheckedKeys)||{}:n&&(f=(0,h.E6)(s.checkedKeys)||{checkedKeys:D.checkedKeys,halfCheckedKeys:D.halfCheckedKeys}),f){var v=f,o=v.checkedKeys,p=o===void 0?[]:o,y=v.halfCheckedKeys,u=y===void 0?[]:y;if(!s.checkStrictly){var g=(0,F.S)(p,!0,l);p=g.checkedKeys,u=g.halfCheckedKeys}t.checkedKeys=p,t.halfCheckedKeys=u}}return a("loadedKeys")&&(t.loadedKeys=s.loadedKeys),t}}]),I}(b.Component);H.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:se.Z,allowDrop:function(){return!0},expandAction:!1},H.TreeNode=de.Z;const le=H}}]);
