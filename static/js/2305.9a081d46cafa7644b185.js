"use strict";(self.webpackChunkantd_admin=self.webpackChunkantd_admin||[]).push([[2305],{67713:(R,c,e)=>{e.d(c,{K:()=>g});var j=e(67294),A=e(54599),v=e(85893);const g=a=>{var E,m,u;const{route:d}=(0,A.nC)(),{backup:i,children:r,permissionControl:l}=a,_=(E=d.route.meta)===null||E===void 0||(m=E.auth)===null||m===void 0?void 0:m.permissionControl,C=typeof l=="function"?l():!!(_!=null&&(u=_.filter(t=>l?.includes(t)))!==null&&u!==void 0&&u.length),p=t=>typeof r=="function"?r(t):t?r:i??null;return(0,v.jsx)(v.Fragment,{children:p(C)})}},42305:(R,c,e)=>{e.r(c),e.d(c,{default:()=>y});var j=e(66992),A=e.n(j),v=e(33948),g=e.n(v),a=e(27061),E=e(63434),m=e(86615),u=e(38345),d=e(67294),i=e(67713),r=e(71577),l=e(84466),_=e(19650),C=e(65460),p=e(54599),t=e(85893);const B=["save","reset","edit","submit","view"],K=[{text:"Auth-- > [Admin]",role:["admin"],style:{height:"100%",background:"linear-gradient(to left, #4BC0C8, #C779D0, #FEAC5E)"}},{text:"Auth---> [Editor]",role:["editor"],style:{height:"100%",background:"linear-gradient(to right, #ed4264, #ffedbc,#ed4264)"}},{text:"Auth-- > [Guest]",role:["guest"],style:{height:"100%",background:"linear-gradient(to right, #40e0d0, #ff8c00, #ff0080)"}}],T=[{text:"Save",permission:["save"]},{text:"Reset",permission:["reset"],backup:(0,t.jsx)(r.ZP,{size:"small",type:"default",onClick:h=>l.ZP.warning("\u8BF7\u524D\u5F80\u914D\u7F6E\u6743\u9650!"),children:"\u65E0Reset\u6743\u9650\u56DE\u663E(\u53EF\u70B9\u53EF\u89C1)"})},{text:"Edit",permission:["edit"]},{text:"Submit",permission:["submit"],backup:(0,t.jsx)("span",{children:"[\u6CA1\u6709Submit\u6743\u9650\u7684\u56DE\u663E!]"})},{text:"View",permission:["view"]}],y=()=>{var h,D,x;const P=(0,d.useRef)(),[O,I]=(0,d.useState)(["admin"]),[L,M]=(0,d.useState)([]),{route:f}=(0,p.nC)(),U=f==null||(h=f.route)===null||h===void 0||(D=h.meta)===null||D===void 0||(x=D.auth)===null||x===void 0?void 0:x.permissionControl;return(0,d.useEffect)(()=>{M(U)},[]),(0,t.jsxs)("div",{style:{background:"#fff"},children:[(0,t.jsx)(a.A,{formRef:P,layout:"horizontal",title:"\u5176\u4ED6\u6743\u9650",initialValues:{permissions:["save"]},submitter:{render:(n,o)=>[(0,t.jsx)(i.K,{permissionControl:["reset"],backup:(0,t.jsx)("a",{children:"backup"}),children:(0,t.jsx)(_.Z,{children:(0,t.jsx)(r.ZP,{onClick:()=>{var s;P==null||(s=P.current)===null||s===void 0||s.resetFields(),M(["save"])},children:"\u91CD\u7F6E"})})})]},onValuesChange:(n,o)=>{const{permissions:s=[]}=o;M(s)},children:(0,t.jsxs)(a.A.Group,{children:[(0,t.jsx)(E.Z.Group,{label:"\u5207\u6362\u6743\u9650\u6D4B\u8BD5",name:"permissions",options:B}),(0,t.jsx)(a.A.Item,{label:"\u6309\u94AE\u7EC4",children:(0,t.jsx)(_.Z,{size:[12,12],children:T.map(n=>(0,t.jsx)(i.K,{permissionControl:()=>{var o;return!!((o=n.permission.filter(s=>L.includes(s)))!==null&&o!==void 0&&o.length)},backup:n.backup,children:n.text==="Reset"?o=>(0,t.jsx)(t.Fragment,{children:o?(0,t.jsx)(r.ZP,{size:"small",type:"primary",children:n.text}):n.backup}):(0,t.jsx)(r.ZP,{size:"small",type:"primary",children:n.text})},n.text))})})]})}),(0,t.jsx)(C.Z,{}),(0,t.jsx)(a.A,{layout:"horizontal",submitter:{render:()=>null},initialValues:{role:"admin"},children:(0,t.jsx)(m.Z.Group,{name:"role",label:`\u5207\u6362\u6743\u9650 --> [${O}]`,radioType:"button",fieldProps:{onChange:n=>{const{value:o}=n.target;I([o])}},options:[{value:"admin",label:"admin"},{value:"editor",label:"editor"},{value:"guest",label:"guest"}]})}),(0,t.jsx)(u.Z,{split:"vertical",title:"\u5207\u6362\u6F14\u793A",bordered:!0,headerBordered:!0,boxShadow:!0,gutter:8,style:{height:"220px"},children:K.map(n=>(0,t.jsx)(i.K,{permissionControl:()=>{var o;return O.includes("admin")||!!((o=n.role.filter(s=>O.includes(s)))!==null&&o!==void 0&&o.length)},children:(0,t.jsx)(u.Z,{hoverable:!0,layout:"center",style:n.style,children:(0,t.jsx)("h1",{children:n.text})})},n.text))})]})}}}]);
